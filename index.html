<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>EspressoEcke</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="index.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@600&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <section class="header-section">
      <header>
        <a href="index.html">EspressoEcke</a>
        <a class="hamburger" onclick="openNav()">&#9776;</a>
      </header>

      <div id="myNav" class="overlay">
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()"
          >&times;</a
        >
        <div class="overlay-content">
          <a
            href="index.html"
            style="
              color: #232323;
              text-decoration: #232323 solid underline 3px;
              text-underline-offset: 10px;
            "
            >Home</a
          >
          <a href="pages/ueber-uns/ueber-uns.html">Über uns</a>
          <a href="pages/gerichte/gerichte.html">Gerichte</a>
          <a href="pages/newsletter/newsletter.html">Newsletter</a>
          <a href="pages/kontakt/kontakt.html">Kontakt</a>
        </div>
      </div>
      <button class="btn-kontakt" onclick="window.location.href='pages/kontakt/kontakt.html'">Contact</button>
    </section>

    <section class="main-content">
      <article id="slideshoww" class="landing-page">
        <div class="landingpage-main-text">
          <h1>
            Willkommen <br />
            im Kaffee <br />
            <span style="color: #d3a87a; text-shadow: 3px 3px 2px black"
              >EspressoEcke</span
            >
          </h1>
          <p>
            Entdecken Sie Ihren neuen Lieblingsort mitten im Herzen der Stadt.
            Bei uns trifft Tradition auf Moderne, und jeder Schluck <br />
            erzählt eine Geschichte.
          </p>
        </div>
        <button
          class="btn-ueberuns"
          onclick="window.location.href='pages/ueber-uns/ueber-uns.html'"
        >
          Über uns
        </button>
        <button
          class="btn-kontakt"
          onclick="window.location.href='pages/kontakt/kontakt.html'"
        >
          Kontakt
        </button>
        <div class="sliderdots">
          <div
            class="circle"
            id="circle0"
            onclick="clearTimeout(timeOutId); currentImageId=0;  changePicture()"
          ></div>
          <div
            class="circle"
            id="circle1"
            onclick="clearTimeout(timeOutId); currentImageId=1;  changePicture()"
          ></div>
          <div
            class="circle"
            id="circle2"
            onclick="clearTimeout(timeOutId); currentImageId=2;  changePicture()"
          ></div>
        </div>
      </article>
      <h2 style="text-align: center">Spezialitäten</h2>
      <article class="spezialitaten">
        <div class="spezialitat">
          <img alt="Unsere coffee" src="images/handmade-coffee.png" />
          <p>Handgefertigter Kaffee</p>
        </div>
        <div class="spezialitat">
          <img alt="Unsere pastries" src="images/pastries.png" />
          <p>Frisches Gebäck</p>
        </div>
        <div class="spezialitat">
          <img alt="Unsere Atomosphere" src="images/coffee-atmosphere2.png" />
          <p>Gemütliche Atmosphäre</p>
        </div>
      </article>
      <article id="counter" class="zahlen number-counter">
        <div>
          <p class="zahl count" data-target="2570">0</p>
          <p>Kaffees serviert</p>
        </div>
        <div>
          <p class="zahl count" data-target="1200">0</p>
          <p>Glückliche Kunden</p>
        </div>
      </article>
    </section>

    <footer>
      <section class="socialmedia">
        <a
          href="https://facebook.com"
          target="_blank"
          class="facebook sm-icon"
        ></a>
        <a
          href="https://twitter.com"
          target="_blank"
          class="twitter sm-icon"
        ></a>
        <a
          href="https://youtube.com"
          target="_blank"
          class="youtube sm-icon"
        ></a>
        <a
          href="https://whatsapp.com"
          target="_blank"
          class="whatsapp sm-icon"
        ></a>
      </section>
      <section class="bottomfoot">
        <a href="index.html">Impressum</a>
        <a href="index.html">AGB</a>
        <a href="index.html">Datenschutz</a>
        <a href="index.html">Kontakt</a>
      </section>
    </footer>

    <script>
      //Nav
      function openNav() {
        document.getElementById("myNav").style.left = "0";
      }

      function closeNav() {
        document.getElementById("myNav").style.left = "100%";
      }

      //Slideshow
      var currentImageId = 0;
      var images = [];
      var slideTime = 5000; // 5 seconds
      var timeOutId;
      var lastScreenWidth = 0;

      window.addEventListener("resize", function () {
        if (lastScreenWidth < 1050 && screen.width >= 1050) {
          clearTimeout(timeOutId);
          currentImageId = 0;
          changePicture();
        }
        lastScreenWidth = window.screen.width;
      });

      async function changePicture() {
        if (screen.width > 1050) {
          images[0] = "images/bg-image-wide1.png";
          images[1] = "images/bg-image-wide2.png";
          images[2] = "images/bg-image-wide3.png";
        } else {
          images[0] = "images/homepage-bg-dalle1.png";
          images[1] = "images/homepage-bg-dalle2.png";
          images[2] = "images/homepage-bg-dalle3.png";
        }

        renderImage(images[currentImageId]);
      }

      async function renderImage(url) {
        const img = new Image();
        img.src = url;

        await img
          .decode()
          .then(() => {
            document.getElementById("slideshoww").style.backgroundImage =
              "url(" + img.src + ")";
            document.getElementById("slideshoww").style.opacity = "1";

            for (i = 0; i < 3; i++) {
              document.getElementById("circle" + i).style.backgroundColor =
                "rgba(0,0,0,0.37)";
            }
            document.getElementById(
              "circle" + currentImageId
            ).style.backgroundColor = "black";

            if (currentImageId < images.length - 1) {
              currentImageId++;
            } else {
              currentImageId = 0;
            }

            timeOutId = setTimeout(changePicture, slideTime);
          })
          .catch((e) => {
            console.log("Error while im decoding");
            console.log(e);
          });
      }

      window.onload = changePicture;

      //Count up animation
      document.addEventListener("scroll", function () {
        const counter = document.getElementById("counter");
        const counts = counter.querySelectorAll(".count");

        counts.forEach((count) => {
          const target = parseInt(count.getAttribute("data-target"), 10);

          const rect = counter.getBoundingClientRect();
          if (rect.top >= 0 && rect.bottom <= window.innerHeight) {
            // Element is in view
            startCounting(count, target);
          }
        });
      });

      function startCounting(element, target) {
        const current = parseInt(element.innerText, 10);
        const increment = target / 150;

        if (current < target) {
          element.innerText = Math.ceil(current + increment);
          setTimeout(() => startCounting(element, target), 30);
        } else {
          element.innerText = target;
        }
      }
    </script>
  </body>
</html>
